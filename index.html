<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gerenciador de Tarefas!</title>

  <style>
    /* ===== Estilo Geral da P√°gina ===== */
    body {
      font-family: "Segoe UI", sans-serif;
      background: linear-gradient(135deg, #3d8d98, #162b81); /* Fundo degrad√™ */
      color: #333;
      margin: 0;
      padding: 0;
      text-align: center;
    }

    h1 {
      margin-top: 20px;
      color: #4a148c;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    }

    /* Container central */
    .container {
      width: 90%;
      max-width: 600px;
      background: #ffffffcc; /* branco com transpar√™ncia */
      margin: 30px auto;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }

    /* Rel√≥gio */
    .clock { font-size: 1.2em; color: #6a1b9a; margin-bottom: 12px; font-weight: 600; }

    /* √Årea de input das tarefas */
    .task-input-area {
      display: flex; flex-wrap: wrap; justify-content: center; gap: 6px; margin-bottom: 15px;
    }

    input[type="text"], input[type="number"], select {
      padding: 7px 10px; border-radius: 6px; border: 1px solid #ccc; font-size: 14px;
      outline: none; transition: 0.2s; background-color: #f1f1f1; color: #333;
    }

    input[type="text"]:focus, input[type="number"]:focus, select:focus {
      border-color: #4a148c; box-shadow: 0 0 5px rgba(74,20,140,0.3); background-color: #fff;
    }

    /* Bot√£o de adicionar */
    #addBtn {
      background: #6c63ff; border: none; color: white; padding: 6px 10px; border-radius: 6px;
      font-size: 18px; cursor: pointer; display: flex; align-items: center; justify-content: center;
      transition: background 0.2s, transform 0.2s; font-weight: 600; box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    #addBtn:hover { background: #5a54d6; transform: scale(1.05); }

    /* Filtros de tarefas */
    .filters { display: flex; justify-content: center; gap: 8px; margin-bottom: 15px; }
    .filters button { flex: 1; padding: 7px 0; border: none; border-radius: 6px; color: #fff;
      cursor: pointer; transition: 0.2s, transform 0.2s; font-weight: 500; box-shadow: 0 2px 5px rgba(0,0,0,0.2);}
    #filterAll { background: #42a5f5; } #filterPending { background: #ffb300; color: #000; } #filterDone { background: #66bb6a; }
    .filters button:hover { opacity: 0.85; transform: scale(1.05); }

    /* Lista de tarefas */
    ul { list-style: none; padding: 0; margin: 0; }
    li { background: #f9f9fb; margin: 6px 0; padding: 10px 14px; border-radius: 8px;
      display: flex; justify-content: space-between; align-items: center; transition: 0.2s, transform 0.2s; }
    li:hover { transform: translateY(-2px); box-shadow: 0 3px 6px rgba(0,0,0,0.1); }
    li.done { text-decoration: line-through; color: #999; background: #ececec; }

    /* A√ß√µes da tarefa */
    .actions { display: flex; gap: 6px; }
    .actions button { background: none; border: none; cursor: pointer; font-size: 17px; transition: 0.2s, transform 0.2s; }
    .actions button:hover { transform: scale(1.3); }
    .actions button:focus { outline: none; }

    /* ===== Modal personalizado de notifica√ß√£o ===== */
    #customNotification {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.5); display: none; justify-content: center; align-items: center;
      z-index: 9999;
    }
    #customNotification div {
      background: #fff; padding: 20px 25px; border-radius: 12px; text-align: center;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    }
    #customNotification button {
      margin-top: 15px; padding: 6px 12px; border: none; border-radius: 6px;
      background: #6c63ff; color: #fff; cursor: pointer; font-weight: 600;
    }
    #customNotification button:hover { background: #5a54d6; }
  </style>
</head>
<body>
  <h1>Bem Vindo!</h1>
  <div class="container">
    <h1>Gerenciador de Tarefas</h1>
    <div id="clock" class="clock"></div>

    <!-- √Årea de input da tarefa -->
    <div class="task-input-area">
      <input type="text" id="taskInput" placeholder="Digite a tarefa..." />
      <select id="categorySelect">
        <option value="Prioridade Alta">Prioridade Alta</option>
        <option value="Prioridade M√©dia">Prioridade M√©dia</option>
        <option value="Prioridade Baixa">Prioridade Baixa</option>
      </select>
      <input type="number" id="timeValue" min="1" placeholder="1" style="width:60px;">
      <select id="timeUnit">
        <option value="seconds">segundos</option>
        <option value="minutes">minutos</option>
        <option value="hours">horas</option>
        <option value="days">dias</option>
      </select>
      <button id="addBtn">‚ûï</button>
    </div>

    <!-- Filtros -->
    <div class="filters">
      <button id="filterAll">Todas</button>
      <button id="filterPending">Pendentes</button>
      <button id="filterDone">Conclu√≠das</button>
    </div>

    <!-- Lista de tarefas -->
    <ul id="taskList"></ul>
  </div>

  <!-- Som do alarme -->
  <audio id="alarmSound" src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg" preload="auto"></audio>

  <!-- Modal de notifica√ß√£o -->
  <div id="customNotification">
    <div>
      <span id="notificationText"></span><br>
      <button onclick="closeNotification()">OK</button>
    </div>
  </div>

  <script>
    // ===== Rel√≥gio din√¢mico =====
    function updateClock() {
      const now = new Date();
      const days = ["Domingo","Segunda","Ter√ßa","Quarta","Quinta","Sexta","S√°bado"];
      const months = ["jan.","fev.","mar.","abr.","mai.","jun.","jul.","ago.","set.","out.","nov.","dez."];
      const dayName = days[now.getDay()];
      const day = String(now.getDate()).padStart(2,'0');
      const month = months[now.getMonth()];
      const year = now.getFullYear();
      const hours = String(now.getHours()).padStart(2,'0');
      const minutes = String(now.getMinutes()).padStart(2,'0');
      const seconds = String(now.getSeconds()).padStart(2,'0');

      document.getElementById("clock").textContent = `${dayName}, ${day} de ${month} de ${year} ${hours}:${minutes}:${seconds}`;
    }
    setInterval(updateClock,1000);
    updateClock();

    // ===== Elementos do DOM =====
    const taskInput = document.getElementById("taskInput");
    const categorySelect = document.getElementById("categorySelect");
    const timeValue = document.getElementById("timeValue");
    const timeUnit = document.getElementById("timeUnit");
    const addBtn = document.getElementById("addBtn");
    const taskList = document.getElementById("taskList");

    // Array que armazenar√° todas as tarefas
    let tasks = [];
    let currentFilter = "all";

    // ‚úÖ Carrega tarefas do localStorage ao abrir a p√°gina
    if(localStorage.getItem("tasks")){
      tasks = JSON.parse(localStorage.getItem("tasks"));
    }

    // Eventos
    addBtn.addEventListener("click", addTask);
    taskInput.addEventListener("keypress", e => { if(e.key==="Enter") addTask(); });

    // ===== Fun√ß√£o para adicionar tarefa =====
    function addTask() {
      const text = taskInput.value.trim();
      if(text==="") return alert("Digite uma tarefa!"); // valida input vazio

      const category = categorySelect.value;
      const durationMs = convertToMs(timeValue.value||0, timeUnit.value); // converte tempo para ms

      const task = { text, category, done:false, timeout:durationMs };
      tasks.push(task);

      // ‚úÖ Salva tarefas no localStorage
      localStorage.setItem("tasks", JSON.stringify(tasks));

      renderTasks();
      taskInput.value = "";

      // Se definido tempo, agenda notifica√ß√£o
      if(durationMs>0){
        setTimeout(()=>{
          if(!task.done) showNotificationCustom(`‚ö†Ô∏è O prazo da tarefa "${task.text}" expirou. Conclua ou revise!`);
        }, durationMs);
      }
    }

    // Converte valor de tempo para milissegundos
    function convertToMs(value,unit){
      const num=parseInt(value);
      switch(unit){
        case "seconds": return num*1000;
        case "minutes": return num*60*1000;
        case "hours": return num*60*60*1000;
        case "days": return num*24*60*60*1000;
        default: return 0;
      }
    }

    // ===== Renderiza tarefas na lista =====
    function renderTasks() {
      taskList.innerHTML = ""; // limpa lista
      const filtered = tasks.filter(t=>currentFilter==="done"?t.done:currentFilter==="pending"?!t.done:true);

      filtered.forEach((task,i)=>{
        const li=document.createElement("li");
        li.className = task.done?"done":"";

        const span=document.createElement("span");
        span.textContent=`${task.text} (${task.category})`;

        const actions=document.createElement("div");
        actions.className="actions";

        const doneBtn=document.createElement("button");
        doneBtn.innerHTML="‚úÖ"; doneBtn.title="Concluir"; doneBtn.onclick=()=>toggleDone(i);

        const editBtn=document.createElement("button");
        editBtn.innerHTML="‚úèÔ∏è"; editBtn.title="Editar"; editBtn.onclick=()=>editTask(i);

        const delBtn=document.createElement("button");
        delBtn.innerHTML="üóëÔ∏è"; delBtn.title="Excluir"; delBtn.onclick=()=>deleteTask(i);

        actions.append(doneBtn,editBtn,delBtn);
        li.append(span,actions);
        taskList.appendChild(li);
      });
    }

    // ===== Alterna conclus√£o de tarefa =====
    function toggleDone(i){
      tasks[i].done=!tasks[i].done;
      localStorage.setItem("tasks", JSON.stringify(tasks)); // atualiza armazenamento
      renderTasks();
    }

    // ===== Edita tarefa =====
    function editTask(i){
      const newText=prompt("Editar tarefa:",tasks[i].text);
      if(newText && newText.trim()!=="") tasks[i].text=newText.trim();
      localStorage.setItem("tasks", JSON.stringify(tasks));
      renderTasks();
    }

    // ===== Exclui tarefa =====
    function deleteTask(i){
      if(confirm("Deseja excluir esta tarefa?")){
        tasks.splice(i,1);
        localStorage.setItem("tasks", JSON.stringify(tasks));
        renderTasks();
      }
    }

    // ===== Notifica√ß√£o personalizada com som =====
    function showNotificationCustom(msg){
      const modal = document.getElementById("customNotification");
      const text = document.getElementById("notificationText");
      const sound = document.getElementById("alarmSound");

      text.textContent = msg;       // define mensagem
      modal.style.display = "flex"; // mostra modal
      sound.currentTime = 0;        // reinicia som
      sound.play();                 // toca som imediatamente
    }

    // Fecha modal e para som
    function closeNotification(){
      const modal = document.getElementById("customNotification");
      modal.style.display="none";
      const sound=document.getElementById("alarmSound");
      sound.pause();
      sound.currentTime=0;
    }

    // ===== Filtros de tarefas =====
    document.getElementById("filterAll").onclick=()=>{currentFilter="all"; renderTasks();};
    document.getElementById("filterPending").onclick=()=>{currentFilter="pending"; renderTasks();};
    document.getElementById("filterDone").onclick=()=>{currentFilter="done"; renderTasks();};

    // Renderiza tarefas salvas ao carregar p√°gina
    renderTasks();
  </script>
</body>
</html>
